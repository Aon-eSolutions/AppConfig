<beans:beans xmlns="http://www.springframework.org/schema/security"
	xmlns:beans="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">

	<!-- Get the properties to configure security -->
	<beans:bean id="propertyPlaceholderConfigurer"
		class="com.crygier.spring.util.SystemPropertyPlaceholderConfigurer">
		<beans:property name="systemProperty" value="security.properties.location" />
		<beans:property name="ignoreResourceNotFound" value="true" />
		<beans:property name="locations">
			<beans:list>
				<beans:value>classpath:security.properties</beans:value>
			</beans:list>
		</beans:property>
	</beans:bean>

	<!-- Authentication - LDAP hardcoded for now -->
	<ldap-server url="${security.ldap.server.url}" 
	             manager-dn="${security.ldap.server.manager.dn}" 
	             manager-password="${security.ldap.server.manager.password}"/>
	             
	<authentication-manager>
		<ldap-authentication-provider group-search-base="${security.ldap.group.search.base}"
		                              group-search-filter="${security.ldap.group.search.filter}"
		                              user-search-base="${security.ldap.user.search.base}"
		                              user-search-filter="${security.ldap.user.search.filter}"/>
	</authentication-manager>

	<!-- Web Application Security -->
	<global-method-security secured-annotations="enabled"/>
	
	<http pattern="/static/**" security="none"/>
	
	<http auto-config="true" use-expressions="true">
		<intercept-url pattern="/" access="permitAll"/>
		<intercept-url pattern="/**" access="permitAll" />
	</http>

</beans:beans>